steps:
  - task: DownloadPipelineArtifact@2
    inputs:
      artifactName: "$(nodeartifactName)"
      targetPath: "$(Build.ArtifactStagingDirectory)"
    displayName: "Download NODE Project Artifact"

  - task: AzureAppServiceManage@0
    inputs:
      azureSubscription: "ArroyoTraining_Connection-NicolasTraining"
      Action: "Stop Azure App Service"
      WebAppName: "$(webName)"
    displayName: "Stopping webapp"

  - task: AzureRmWebAppDeployment@4
    inputs:
      ConnectionType: "AzureRM"
      azureSubscription: "ArroyoTraining_Connection-NicolasTraining"
      appType: "webAppLinux"
      WebAppName: "$(webName)"
      packageForLinux: "$(Build.ArtifactStagingDirectory)/**/$(nodeZipName)"
      RuntimeStack: "NODE|lts"

  - task: AzureAppServiceManage@0
    inputs:
      azureSubscription: "ArroyoTraining_Connection-NicolasTraining"
      Action: "Start Azure App Service"
      WebAppName: "$(webName)"
    displayName: "Starting webapp"
